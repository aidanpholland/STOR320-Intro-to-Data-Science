---
title: "Homework 2"
author: "AIDAN HOLLAND"
date: "`r format(Sys.time(), '%B %d, %Y')`"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

# Instructions

**Exercises:**  1-3 (Pgs. 49-50); 2-4 (Pg. 51); 2,4 (Pg. 54); 1-4 (Pg. 58)

**Submission:** Submit via an electronic document on Sakai. Must be submitted as a HTML file generated in RStudio. All assigned problems are chosen according to the textbook *R for Data Science*. You do not need R code to answer every question. If you answer without using R code, delete the code chunk. If the question requires R code, make sure you display R code. If the question requires a figure, make sure you display a figure. A lot of the questions can be answered in written response, but require R code and/or figures for understanding and explaining. 

```{r, include=FALSE}
library(tidyverse)
library(ggplot2)
library("nycflights13")
```

# Chapter 3 (Pgs. 49-50)

##  Exercise 1
```{r}
bigdelayflights <- filter(flights, arr_delay>=120)
IAHHOUflights <- filter(flights, dest == "IAH" | dest == "HOU")
UADflights <- filter(flights, carrier == "UU" | carrier == "AA" | carrier == "DL")
summerflights <- filter(flights, month == 7 | month == 8 | month == 9)
weirdlateflights <- filter(flights, dep_delay <= 0, arr_delay >= 120)
fastflights <- filter(flights, dep_delay >= 60, dep_delay - arr_delay >= 30)
nightflights <- filter(flights, dep_time == 2400 | dep_time <= 600)
```

##  Exercise 2
```{r}
summerflights <- filter(flights, between(month, 7, 9))
nightflights <- filter(flights, between(dep_time, 0, 600) | dep_time == 2400)
```

The between argument provides a precise range for which data can be selected or deselected for. It simplifies the question of summerflights the most, and can also be used with nightflights, but does not necessarily simplify it by a lot.

##  Exercise 3
```{r}
nodeptimeflights <- filter(flights, is.na(dep_time))
nodeptimeflights
```

8255 flights do not have a departure time. Additionally missing is dep_delay, arr_time, arr_delay, and air_time. These data points likely represent flights that were cancelled as they have all of the other data recorded.

# Chapter 3 (Pg. 51)

##  Exercise 2
```{r}
delayedflights <- arrange(flights, desc(dep_delay))
undelayedflights <- arrange(flights, dep_delay)
```

##  Exercise 3
```{r}
fastflights <- arrange(flights, air_time)
```

Imagining that fast flights are the flights that take the shortest amount of time.

##  Exercise 4
```{r}
longflights <- arrange(flights, desc(distance))
shortflights <- arrange(flights, distance)
```

# Chapter 3 (Pg. 54)

##  Exercise 2
```{r}
testflights <- select(flights, c(2,1,3,1))
testflights
```

If you include the same variable twice in a select() call, it will not be displayed twice, and will be ordered based off its first mentioning.

##  Exercise 4
```{r}
testflights <- select(flights, contains("TIME"))
testflights
testflights2 <- select(flights, contains("TIME", ignore.case=F))
testflights2
```

contains() is not case-sensitive, which is not surprising as it is the default behavior. To change this, you can input ignore.case=F, resulting in an empty dataframe.

# Chapter 3 (Pg. 58)

##  Exercise 1
```{r}
# this can be seen as a basic function for converting a time like 1:15am to 75 minutes
flights_times <- mutate(flights,
  dep_time_act = (dep_time %/% 100 * 60 + dep_time %% 100) %% 1440,
  sched_dep_time_act = (sched_dep_time %/% 100 * 60 + sched_dep_time %% 100) %% 1440
)
select(flights_times, dep_time, dep_time_act, sched_dep_time, sched_dep_time_act)
                        
```

The "..._act" gives the minute of the day out of 1440 so that computing is more convenient.

##  Exercise 2
```{r}
testflights3 <- transmute(flights, air_time, arr_time-dep_time)
testflights3
testflights4 <- transmute(flights,
  air_time,
  dep_time_act = (dep_time %/% 100 * 60 + dep_time %% 100) %% 1440,
  arr_time_act = (arr_time %/% 100 * 60 + arr_time %% 100) %% 1440,
  air_time_act = arr_time_act - dep_time_act,
  air_time_difference = air_time - air_time_act)
testflights4
filter(testflights4, air_time_difference==0)
```

You should expect to see that the values are equal, but because of the inconvenience of the notation of the time values in the dataframe, they are not the same. To fix this, we need to use some of our code from exercise 1 to convert the time notation to minutes. However, after doing the math, it is clear that even after converting to a more usable notation, there is only a tiny percent (196/336776)of total flights where the actual air time is equal to the arrival time in minutes minus the departure time in minutes. (?)

##  Exercise 3
```{r}
testflights5 <- select(flights, dep_time, sched_dep_time, dep_delay)
mutate(testflights5,
  dep_time_act = (dep_time %/% 100 * 60 + dep_time %% 100) %% 1440,
  sched_dep_time_act = (sched_dep_time %/% 100 * 60 + sched_dep_time %% 100) %% 1440,
  check = sched_dep_time_act - dep_time_act + dep_delay) %>%
  filter(check == 0) 
```

##  Exercise 4
```{r}
#
```